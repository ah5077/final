<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="performance">
	
	<insert id="performanceRegister">
		insert into
			performance
		values (
			performance_seq.nextval,
			#{ memberId },
			#{ categoryCode },
			#{ locationCode },
			#{ perTitle },
			#{ perDirector },
			#{ perActor },
			#{ perAddress },
			#{ perContent },
			#{ perImgOriginalFileName },
			#{ perImgRenamedFileName },
			#{ detailImgOriginalFileName },
			#{ detailImgRenamedFileName },
			#{ perRating },
			default,
			default,
			default
		)
	</insert>
	
	<select id="selectPerformanceList" resultMap="performanceMap">
		select
			*
		from
			performance
		
		<!-- order by
			no desc -->
	</select>
	
	<select id="categoryListView" resultMap="performanceMap">
		select
			*
		from
			performance
		where 
			category_code = #{ category }
	</select>
	
	<select id="getCategoryName" resultType="string">
		select 
			category_name
		from
			category
		where
			category_code = #{ category }
	</select>
	
	<update id="approvePerRegister">
		update 
			performance
		set 
			admin_approval = 'Y'
		where 
			per_no = #{ per_no }
	</update>
	
	<select id="adminApprovalPerList" resultMap="performanceMap">
		select
			*
		from
			performance
		where
			admin_approval = 'N'
		<!-- order by
			no desc -->
	</select>
	
	<select id="companyPerList" resultMap="performanceMap">
		select
			*
		from
			performance
		where
			member_id = #{ memberId } <!-- and admin_approval = 'Y' -->
		<!-- order by
			no desc -->
	</select>
	
	<select id="selectOnePerformance" resultMap="performanceMap">
		select
			*
		from
			performance
		where
			per_no = #{ perNo }
		<!-- order by
			no desc -->
	</select>
	
	<resultMap type="performance" id="performanceMap">
	</resultMap>
	
	
	
	
</mapper>